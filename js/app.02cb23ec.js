(function(t){function e(e){for(var n,s,c=e[0],r=e[1],l=e[2],d=0,f=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,c=1;c<o.length;c++){var r=o[c];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/ToDoList/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("85ec"),i=o.n(n);i.a},"54ac":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),i=(o("d3b7"),o("bc3a")),a=o.n(i),s={},c=a.a.create(s);c.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),c.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=c,window.axios=c,Object.defineProperties(t.prototype,{axios:{get:function(){return c}},$axios:{get:function(){return c}}})},n["default"].use(Plugin);Plugin;var r=o("ecee"),l=o("c074"),u=o("ad3d");r["c"].add(l["a"]),n["default"].component("font-awesome-icon",u["a"]);var d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("HeaderRow"),o("CardBody"),o("ToDoDialog"),o("SigninDialog")],1)},f=[],p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{staticStyle:{"text-align":"left","font-size":"24px"},attrs:{span:4}},[t._v("ToDoList")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[o("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-search",circle:""}}),o("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-plus",circle:""},on:{click:t.toggleToDo}}),t.todoListChecked?o("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-delete",circle:""},on:{click:t.batchDeleteToDo}}):t._e(),t.user.active?t._e():o("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-user",circle:""},on:{click:t.toggleSignIn}}),t.user.active?o("el-button",{attrs:{size:"small",type:"info",circle:""},on:{click:t.signOut}},[o("font-awesome-icon",{attrs:{icon:["fas","sign-out-alt"],size:"xs"}})],1):t._e()],1)],1)},m=[],g=o("5530"),v=o("2f62"),b={data:function(){return{}},computed:Object(g["a"])({},Object(v["e"])([]),{},Object(v["c"])(["todoListChecked","user"])),methods:Object(g["a"])({},Object(v["d"])(["toggleToDo","toggleSignIn"]),{},Object(v["b"])(["batchDeleteToDo","signOut"]))},h=b,D=o("2877"),T=Object(D["a"])(h,p,m,!1,null,null,null),O=T.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",t._l(t.list,(function(e,n){return o("el-col",{key:n,attrs:{span:6}},[o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v(t._s(e.name))]),o("el-row",{staticStyle:{"text-align":"center",position:"absolute",width:"100%",bottom:"-29px"}},[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.updateToDo(n)}}}),o("el-button",{attrs:{size:"mini",type:e.checked?"warning":"default",icon:"el-icon-check",circle:""},on:{click:function(e){return t.toggleToDoItemChecked(n)}}}),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteToDo(n)}}})],1)],1),o("div",{staticClass:"content-html",domProps:{innerHTML:t._s(t.marked(e.content))}})])],1)})),1)},k=[],y=o("e0c1"),j=o.n(y),w={computed:Object(g["a"])({},Object(v["e"])({list:function(t){return t.todo.list}})),methods:Object(g["a"])({},Object(v["d"])(["updateToDo","toggleToDoItemChecked"]),{},Object(v["b"])(["deleteToDo"]),{marked:j.a})},_=w,L=(o("a8e8"),Object(D["a"])(_,x,k,!1,null,"57ebe520",null)),S=L.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.todo.loading,expression:"todo.loading"}],attrs:{title:"新增代办事项",visible:t.todo.visible},on:{"update:visible":function(e){return t.$set(t.todo,"visible",e)},closed:t.initToDo}},[o("el-form",{attrs:{model:t.todo}},[o("el-form-item",[o("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"标题"},model:{value:t.todo.name,callback:function(e){t.$set(t.todo,"name",e)},expression:"todo.name"}})],1),o("el-form-item",[o("el-input",{attrs:{type:"textarea",rows:8,placeholder:"内容"},model:{value:t.todo.content,callback:function(e){t.$set(t.todo,"content",e)},expression:"todo.content"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.saveToDo}},[t._v("确 定")])],1)],1)},P=[],I={data:function(){return{}},computed:Object(g["a"])({},Object(v["e"])(["todo"])),methods:Object(g["a"])({},Object(v["b"])(["saveToDo"]),{},Object(v["d"])(["initToDo"]))},C=I,z=(o("b2c2"),Object(D["a"])(C,$,P,!1,null,"c6240d44",null)),E=z.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.user.loading,expression:"user.loading"}],attrs:{title:"登录&注册",visible:t.user.visible},on:{"update:visible":function(e){return t.$set(t.user,"visible",e)}}},[o("el-form",{attrs:{model:t.user}},[o("el-form-item",[o("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"账号"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),o("el-form-item",[o("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"default"},on:{click:t.register}},[t._v("注 册")]),o("el-button",{attrs:{type:"primary"},on:{click:t.signIn}},[t._v("登 录")])],1)],1)},M=[],N={data:function(){return{}},computed:Object(g["a"])({},Object(v["e"])(["user"])),methods:Object(g["a"])({},Object(v["b"])(["register","signIn"]))},U=N,H=Object(D["a"])(U,J,M,!1,null,null,null),B=H.exports,R={name:"app",components:{HeaderRow:O,CardBody:S,ToDoDialog:E,SigninDialog:B},created:function(){this.$store.dispatch("active")}},q=R,A=(o("034f"),Object(D["a"])(q,d,f,!1,null,null,null)),F=A.exports,G=(o("d81d"),o("a434"),o("3ca3"),o("ddb0"),o("b0c0"),{state:{visible:!1,loading:!1,active:!1,isSync:"",name:"",password:"",uuid:"",token:{}},mutations:{toggleSignIn:function(t){t.visible=!t.visible},initUser:function(t){t.name="",t.uuid="",t.token={},t.active=!1},setUser:function(t,e){t.name=e.name,t.uuid=e.uuid,t.token=e.token,t.active=!0}},getters:{user:function(t){return{name:t.name,password:t.password,active:t.active}}},actions:{}}),K=(o("45fc"),{state:{visible:!1,loading:!1,name:"",content:"",index:null,list:[],list_checked:[]},mutations:{initToDo:function(t){t.name="",t.content="",t.index=null},setToDo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"",content:""};t.name=e.name,t.content=e.content},toggleToDo:function(t){t.visible=!t.visible},toggleToDoLoading:function(t){t.loading=!t.loading},unshiftToDoList:function(t,e){t.list.unshift(e)},setToDoList:function(t,e){t.list=e},deleteToDo:function(t,e){t.list=t.list.splice(e,1)},updateToDo:function(t,e){var o=t.list[e];t.name=o.name,t.content=o.content,t.index=e,t.visible=!0},toggleToDoItemChecked:function(t,e){t.list[e].checked=!t.list[e].checked}},getters:{todo:function(t){return{name:t.name,content:t.content}},todoListChecked:function(t){return t.list.some((function(t){return 1==t.checked}))}},actions:{}});n["default"].use(v["a"]);var Q=new v["a"].Store({mutations:{},getters:{},actions:{active:function(t){var e=t.commit,o=t.dispatch;this._vm.$axios.get("/api/user/active").then((function(t){200===t.data.status&&e("setUser",t.data.data),o("loadToDoList")})).catch((function(){o("loadToDoList")}))},signIn:function(t){var e=t.commit,o=t.getters,n=t.dispatch;this._vm.$axios.post("/api/user/signin",{data:o.user}).then((function(t){200===t.data.status&&(e("setUser",t.data.data),e("toggleSignIn"),n("loadToDoList"))}))},signOut:function(t){var e=t.commit,o=t.dispatch;this._vm.$axios.get("/api/user/signout").then((function(t){200===t.data.status&&(e("initUser"),o("loadToDoList"))}))},loadToDoList:function(t){var e=t.state,o=t.commit,n=[];if(null!==localStorage.getItem("todoList")&&(n=JSON.parse(localStorage.getItem("todoList"))),e.user.active){var i=this._vm.axios;Promise.all(n.map((function(t){return new Promise((function(o){i.post("/api/todo/insert",{data:Object(g["a"])({},t,{token:e.user.token})}).then(o)}))}))).then((function(){localStorage.removeItem("todoList"),i.get("/api/todo/list").then((function(t){200===t.data.status&&o("setToDoList",t.data.data.list.map((function(t){return Object(g["a"])({},t,{checked:!1})})))}))}))}else o("setToDoList",n)},saveToDo:function(t){var e=t.state,o=t.commit,n=t.getters,i=this._vm.$axios;o("toggleToDoLoading"),new Promise((function(t){e.user.active||t({status:200,data:Object(g["a"])({},n.todo,{datetime:(new Date).getTime()})}),null!=e.todo.index&&e.user.active&&i.post("api/todo/update",{data:Object(g["a"])({},n.todo,{id:e.todo.list[e.todo.index].id,token:e.user.token})}).then((function(e){return t(e.data)})),null==e.todo.index&&e.user.active&&i.post("/api/todo/insert",{data:Object(g["a"])({},n.todo,{token:e.user.token})}).then((function(e){return t(e.data)}))})).then((function(t){return null!=e.todo.index&&(e.todo.list.splice(e.todo.index,1),o("setToDoList",e.todo.list)),o("unshiftToDoList",Object(g["a"])({},t.data,{checked:!1})),e.user.active||localStorage.setItem("todoList",JSON.stringify(e.todo.list)),Promise.reject()})).catch((function(){o("toggleToDoLoading"),o("toggleToDo"),o("initToDo")}))},deleteToDo:function(t,e){var o=t.state,n=t.commit,i=o.todo.list,a=i[e];o.user.active?this._vm.$axios.post("/api/todo/delete",{data:Object(g["a"])({},a,{token:o.user.token})}).then((function(t){200===t.data.status&&(i=o.todo.list.splice(e,1),n("setToDoList",i))})):(i.splice(e,1),n("setToDoList",i),localStorage.setItem("todoList",JSON.stringify(i)))},batchDeleteToDo:function(t){for(var e=t.state,o=t.dispatch,n=e.todo.list,i=n.length-1;i>=0;i--)1==n[i].checked&&o("deleteToDo",i)},register:function(t){var e=t.getters,o=t.dispatch;console.log(this._vm),console.log(this._vm.$axios),this._vm.$axios.post("/api/user/register",{data:e.user}).then((function(t){console.log(t),200===t.data.status&&o("signIn")}))}},modules:{user:G,todo:K}}),V=o("5c96"),W=o.n(V);o("0fae");n["default"].use(W.a),n["default"].config.productionTip=!1,new n["default"]({store:Q,render:function(t){return t(F)}}).$mount("#app")},"85ec":function(t,e,o){},a8e8:function(t,e,o){"use strict";var n=o("54ac"),i=o.n(n);i.a},b2c2:function(t,e,o){"use strict";var n=o("fc1b"),i=o.n(n);i.a},fc1b:function(t,e,o){}});
//# sourceMappingURL=app.02cb23ec.js.map