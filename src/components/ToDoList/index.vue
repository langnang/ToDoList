<template>
  <div class="todo-list-container">
    <div class="todo-list__header">
      <div class="todo-list__new">
        <input
          class="todo-list__new--input"
          type="text"
          v-model="input"
          placeholder="请输入待办事项"
          @keyup.enter="enterKeyUp"
        />
      </div>
      <el-radio-group class="todo-list__radio" v-model="target" size="mini">
        <el-radio-button label="todo">Todo</el-radio-button>
        <el-radio-button label="done">Done</el-radio-button>
        <el-radio-button label="all">All</el-radio-button>
      </el-radio-group>
    </div>
    <div class="todo-list__body">
      <ul class="todo-list__list">
        <li
          class="todo-list__item"
          v-for="item in list"
          :key="item.index"
          @dblclick="onDblClick(item.index)"
        >
          <span class="todo-list__item--state" @click="toggleState(item.index)">
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              width="1024"
              height="1024"
              v-if="!item.state"
            >
              <path
                d="M89.227636 84.526545a4.654545 4.654545 0 0 0-4.654545 4.701091v845.544728a4.654545 4.654545 0 0 0 4.654545 4.654545h845.544728a4.654545 4.654545 0 0 0 4.654545-4.654545V89.227636a4.654545 4.654545 0 0 0-4.654545-4.654545H89.227636z m0-84.526545h845.544728C984.064 0 1024 39.936 1024 89.227636v845.544728A89.227636 89.227636 0 0 1 934.772364 1024H89.227636A89.227636 89.227636 0 0 1 0 934.772364V89.227636C0 39.936 39.936 0 89.227636 0z m309.853091 650.565818l372.224-372.270545a37.236364 37.236364 0 0 1 52.642909 0l0.465455 0.465454a37.236364 37.236364 0 0 1 0 52.689455L425.890909 730.018909l-0.465454 0.465455a37.236364 37.236364 0 0 1-52.689455 0l-173.149091-173.149091a37.236364 37.236364 0 0 1 0-52.689455l0.465455-0.465454a37.236364 37.236364 0 0 1 52.596363 0l146.432 146.385454z"
              ></path>
            </svg>
            <svg
              t="1605756870580"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="16641"
              width="200"
              height="200"
              v-else
            >
              <path
                d="M89.227636 84.526545a4.654545 4.654545 0 0 0-4.654545 4.701091v845.544728a4.654545 4.654545 0 0 0 4.654545 4.654545h845.544728a4.654545 4.654545 0 0 0 4.654545-4.654545V89.227636a4.654545 4.654545 0 0 0-4.654545-4.654545H89.227636z m0-84.526545h845.544728C984.064 0 1024 39.936 1024 89.227636v845.544728A89.227636 89.227636 0 0 1 934.772364 1024H89.227636A89.227636 89.227636 0 0 1 0 934.772364V89.227636C0 39.936 39.936 0 89.227636 0z"
              ></path>
            </svg>
          </span>

          <span class="todo-list__item--edit">
            <input
              type="text"
              v-model="item.content"
              @keyup.enter="enterItemKeyUp"
            />
          </span>
          <span
            class="todo-list__item--content"
            :class="{ inactive: !item.state }"
          >
            {{ item.content }}
          </span>
          <span
            class="todo-list__item--actions"
            :class="{ inactive: !item.state }"
          >
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              width="1024"
              height="1024"
              v-if="false"
            >
              <path
                d="M915.165758 373.347127c4.555759-5.125741 11.391445-7.982812 18.244526-7.982812 7.395434 0 13.669324 2.857071 18.226107 7.982812l0 0c4.558829 4.565992 7.396457 10.840906 7.396457 18.254759L959.032848 834.120418c0 34.771945-14.230096 66.145489-37.031405 88.946798-22.780843 23.38357-54.116525 37.072337-88.851631 37.072337l0 0L190.031543 960.139553l0 0c-34.752502 0-66.647933-13.688767-89.430822-36.490076l0-0.581238c-22.802332-22.801309-37.031405-54.17383-37.031405-88.946798l0 0L63.569316 190.297091l0 0c0-34.782178 14.229073-66.715471 37.031405-89.527013 22.782889-22.811542 54.67832-37.07029 89.430822-37.07029l0 0 442.035532 0 0 0c6.833639 0 13.670348 2.848884 18.22713 7.413853l0 0c4.555759 5.134951 7.393387 11.401678 7.393387 18.24555 0 7.413853-2.836605 13.688767-7.393387 18.823718l0 0c-4.555759 4.557806-11.393491 7.414877-18.22713 7.414877l0 0L190.031543 115.597785l0 0c-20.50501 0-39.310308 7.983835-52.979632 21.662369l0 0c-13.668301 13.688767-21.662369 32.513508-21.662369 53.036937l0 643.823328c0 20.524452 7.994068 39.347147 21.662369 52.458769 13.669324 13.68672 32.474622 22.239514 52.979632 22.239514l643.117247 0c20.50501 0 39.311331-8.552793 52.402487-22.239514l0 0c13.668301-13.111622 22.223141-31.934317 22.223141-52.458769L907.774417 391.602909C907.774417 384.189056 910.611022 377.913119 915.165758 373.347127L915.165758 373.347127zM425.287591 598.034469l-64.36903 0-13.108552 78.116125 77.477582-13.109576L425.287591 598.034469zM833.148789 267.284509l-76.897368-77.555353L399.646608 546.714639l71.76651 0 5.714142 0 0 5.696746 0 71.281463L833.148789 267.284509zM832.010873 119.584586c-6.272867 2.858094-12.527314 6.844895-17.666358 11.979846l0 0-21.642926 21.662369 76.899414 77.5574 22.223141-22.242584c5.115508-4.556783 9.111518-10.830673 11.951193-17.675568 2.278903-6.27389 3.999081-13.109576 3.999081-20.522406l0 0 0 0c0-15.397688-6.275937-29.087479-15.950274-38.779212l0 0c-10.252505-10.270924-23.940249-15.966647-38.748513-15.966647l0 0C845.680197 115.597785 838.266343 116.737748 832.010873 119.584586L832.010873 119.584586zM462.876698 709.22385l-171.445744 29.656437-7.993045 1.718131 1.137916-7.993045 29.635971-171.641195 0.560772-2.27788 1.137916-1.137916L777.892301 95.064123l0 0c9.67229-9.691733 21.642926-17.674545 34.753525-23.3805 12.531408-5.134951 26.200732-7.983835 40.429805-7.983835l0 0c29.057803 0 55.835679 11.980869 75.200726 31.363312l0 0c18.804275 19.394722 30.756491 45.623084 30.756491 75.27952 0 14.248516-2.836605 27.937283-7.974625 40.48711-5.114484 13.108552-13.08911 24.51944-22.781866 34.211173L465.735815 708.083887l-1.158383 1.13894L462.876698 709.222827z"
              ></path>
            </svg>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              width="1024"
              height="1024"
              @click="onDelete(item.index)"
            >
              <path
                d="M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"
              ></path>
            </svg>
          </span>
        </li>
      </ul>
    </div>
    <div class="todo-list__footer"></div>
  </div>
</template>
<script>
export default {
  name: "ToDoList",
  data() {
    return {
      input: "",
      data: [
        { state: true, content: "列表内容0", time: "" },
        { state: true, content: "列表内容1", time: "" },
        { state: false, content: "列表内容2", time: "" },
        { state: true, content: "列表内容3", time: "" },
        { state: true, content: "列表内容4", time: "" },
      ],
      target: "all",
      edit: null,
    };
  },
  computed: {
    list() {
      return this.data.reduce((total, value, index) => {
        if (this.target == "todo") {
          if (value.state == false) return total;
        } else if (this.target == "done") {
          if (value.state == true) return total;
        }
        total.push({ ...value, index });
        return total;
      }, []);
    },
  },
  methods: {
    toggleState(index) {
      this.data[index].state = !this.data[index].state;
    },
    enterKeyUp() {
      if (this.input == "") {
        return;
      }
      this.data.unshift({
        state: true,
        content: this.input,
        time: "",
      });
      this.input = "";
    },
    onDblClick(index = null) {
      this.edit = index;
    },
    onDelete(index) {
      this.data.splice(index, 1);
    },
    enterItemKeyUp() {
      this.data[this.edit].content = this.list[this.edit].content;
      this.onDblClick();
    },
  },
};
</script>
<style lang="scss">
@import "./index.scss";
</style>
